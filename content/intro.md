引言
============

### 关于本教程

欢迎来到**为自己学习Haskell**！如果你正在读这本书，很有可能你想学习Haskell。很好，你找对地方了，现在我们先聊聊本教程。

我打算编写这部教程的原因一方面是我想巩固我的Haskell的知识，另一方面我觉得可以帮助刚接触Haskell的新人从我的角度学习Haskell。在网上有很多关于Haskell的教程。当我刚开始学习Haskell的时候，我并不只使用一个资源。我学习它的方式是通过阅读几种不同的教程的文章，因为每篇文章都会从不同角度去解释一些东西。通过阅读不同的文章，我才能将所有片断还原成完整的画面。所以这是在尝试另外一条学习Haskell的有用途径，这样读者就有更大的可能性找到自己的喜欢的方法。

本教程的目标读者是有使用命令式编程语言经验（Ｃ，Ｃ＋＋，Ｊava，Ｐython...)但是还没有使用过函数式编程语言(Haskell，ＭＬ，ＯＣaml...)的人。我想即使没有多少编程经验，像你这么聪明的人肯定没有任何困难。

freenode上的 #haskell频道是一个提问的好地方。那里的人都非常友好，富有耐心，而且体谅新人。

在我掌握Haskell之前，起码有过两次失败，因为对我说Haskell看起来太奇怪了以致我没法领悟。当某天我脑海“咯嚓”一声越过这个障碍之后，一些开始变得顺利。我想要说的是：Haskell很棒，如果你很对编程很感兴趣那你一定要学习它，即使刚开始看起来有点奇怪。学习Haskell就像第一次学习编程一样，很有趣。它强制你用不同的方式思考，这将我们带到下一节。。

### 什么是Haskell?

Haskell是一门**纯函数式编程语言**。命令式编程是你通过给计算机一连串的指令，然后计算机来执行以完成工作。当计算机执行这些指令的时候，它将改变状态。例如，你给变量a赋值5，然后执行了另一些操作，然后再将a设置成其他值。有一些控制结构来使某些操作执行多次。函数式编程不会告诉计算机这样做，相反只是告诉计算机一些事实。一个数的阶乘是从１到这个数的所有数的乘积，一个数的列表的总和是第一个数与剩下的数的总和的和，等等。不能将变量设置为一个值然后再设置成其他值。如果把a设置成5，那就不能再将a设置为其他值。因为你已经说了a是5了，难道你要撒谎吗？所以在纯函数式语言中，函数没有副作用。函数唯一所有做的就是作一些计算然后返回结果。乍一看似乎这样很束手束脚，但是这样做有非常好的结果：如果相同的参数调用同一个函数，可以保证这个函数一定会返回相同的结果。这叫做参照透明度，它不仅使编译器能推导程序行为，而且能让你轻易的推断一个函数的正确性，并且通过将一些简单函数粘合在一起构建更复杂的函数。

Haskell是惰性的。这意味着除非被显式的告知，直到被强制要求给出结果之前Haskell都不会执行函数进行计算。这种行为与参照透明度结合得很好，它让你可以将程序看作是数据的一系列转换。还能实现一些很酷的东西如无穷数据结构。假设你有一个不可变的数字列表xs = [1,2,3,4,5,6,7,8]和一个函数doubleMe，这个函数将列表的每一个元素乘以2，然后返回新的列表。在命令式语言中，如果我们想要把把这个列表的每个元素乘以8，可以doubleMe(doubleMe(doubleMe(xs)))，这个表达式将这个列表处理一次，产生一个列表的拷贝并返回它，然后它再将这个列表处理两次并返回结果。在惰性语言中，对一个列表调用doubleMe但是不强制要求返回结果类似于这个程序说“好的，我迟点再执行这个操作”。如果这时候需要获取结果，第一个doubleMe会告诉第二个doubleMe“我现在就需要这个结果！”，第二个doubleMe把这个消息传达给第三个函数，然后第三个函数不情愿地返回一个双倍的1，也就是2。第二个函数取得这个结果并向第一个函数返回4。第一个函数看到这个结果之后向你返回第一个元素是8。所以这个程序只有当需要时才会作一次计算。通过这种方式，惰性编程语言取得一个初始值然后进行高效的转换，最后组合出结果。

Haskell是**强类型的**。就是说，编译器能在编译期获知代码哪里是数字哪里是字符串等等。也就意味着很多错误能在编译器捕获。当你尝试把一个数字和字符串相加时，编译器将抛出异常。Haskell有一个能进行类型推断的类型系统。这样你就不必为每一段代码显式地标示类型，因为大多数情况下类型系统能智能地推断出来。对于a = 5 + 4，不必告诉Haskell a是一个数字，它自己能推断出来。类型推断使代码能更加通用。一个将两个参数相加的函数不必要显式地声明类型信息，只要这两个参数能像数字一个相加这个函数就能工作。

Haskell是**优雅和精确的**。因为它使用了很多高级的概念，所以一般来说Haskell程序比同样功能的命令式程序要短。而且短的程序比长程序的bug要少和容易维护。

Haskell是由一群**非常聪明的人**(有博士学位）发明的。有关Haskell的工作始于1987年，2003年发表了Haskell Report，定义了这门语言的一个稳定版本。

### 准备工作

一个字符编辑器和一个Haskell编译器。你肯定已经装好了喜欢的字符编辑器，所以我们将不在这个问题上浪费时间。本教程将使用最广泛使用的Haskell编译器GHC。推荐下载[Haskell Platform](http://hackage.haskell.org/platform/)。

GHC可以编译后缀为.hs的Haskell脚本，同时它也有一个交互模式。你可以调用装载的脚本的方法并且马上显示结果。对于学习来说这比每做一点改动都要编译和执行来得容易。在终端输入ghci可以进入到交互模式。如果你在一个myfunctions.hs的文件中定义了一些函数，通过在存放myfunctions.hs文件夹中开打ghci并输入:l myfunctions，这样就可以在交互模式中使用这些函数。如果你修改了myfunctions.hs文件，再执行一遍:l myfunctions或者:r，这两个命令的效果是相同的，后者只是重新装载一遍当前的脚本。我的工作流一般是在一个.hs文件中定义一些函数，在交互模式中装载这个脚本，测试一下这些函数然后修改.hs文件，周而复始。这也是本教程用到的方法。
